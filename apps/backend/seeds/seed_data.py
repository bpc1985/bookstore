import asyncio
import sys
from decimal import Decimal
from pathlib import Path

sys.path.insert(0, str(Path(__file__).parent.parent))

from sqlalchemy.ext.asyncio import AsyncSession
from app.database import AsyncSessionLocal, create_tables
from app.models.user import User, UserRole
from app.models.category import Category
from app.models.book import Book
from app.utils.security import get_password_hash


CATEGORIES = [
    {"name": "Fiction", "description": "Fictional literature including novels and short stories"},
    {"name": "Non-Fiction", "description": "Factual books including biographies, history, and science"},
    {"name": "Science Fiction", "description": "Speculative fiction dealing with imaginative concepts"},
    {"name": "Fantasy", "description": "Fiction set in imaginary universes with magical elements"},
    {"name": "Mystery", "description": "Fiction dealing with the solution of a crime or puzzle"},
    {"name": "Romance", "description": "Fiction focused on romantic relationships"},
    {"name": "Thriller", "description": "Fiction characterized by suspense, excitement, and tension"},
    {"name": "Biography", "description": "Accounts of real people's lives"},
    {"name": "Self-Help", "description": "Books aimed at personal improvement"},
    {"name": "Technology", "description": "Books about computers, programming, and technology"},
]

BOOKS = [
    {
        "title": "The Great Gatsby",
        "author": "F. Scott Fitzgerald",
        "description": "A story of decadence and excess in the Jazz Age.",
        "isbn": "9780743273565",
        "price": Decimal("14.99"),
        "stock_quantity": 50,
        "cover_image": "https://images.unsplash.com/photo-1544947950-fa07a98d237f?w=400&h=600&fit=crop",
        "categories": ["Fiction"],
    },
    {
        "title": "1984",
        "author": "George Orwell",
        "description": "A dystopian social science fiction novel.",
        "isbn": "9780451524935",
        "price": Decimal("12.99"),
        "stock_quantity": 75,
        "cover_image": "https://images.unsplash.com/photo-1512820790803-83ca734da794?w=400&h=600&fit=crop",
        "categories": ["Fiction", "Science Fiction"],
    },
    {
        "title": "Dune",
        "author": "Frank Herbert",
        "description": "An epic science fiction novel set in the distant future.",
        "isbn": "9780441172719",
        "price": Decimal("18.99"),
        "stock_quantity": 40,
        "cover_image": "https://images.unsplash.com/photo-1543002588-bfa74002ed7e?w=400&h=600&fit=crop",
        "categories": ["Science Fiction", "Fantasy"],
    },
    {
        "title": "The Hobbit",
        "author": "J.R.R. Tolkien",
        "description": "A fantasy novel about the adventures of Bilbo Baggins.",
        "isbn": "9780547928227",
        "price": Decimal("15.99"),
        "stock_quantity": 60,
        "cover_image": "https://images.unsplash.com/photo-1532012197267-da84d127e765?w=400&h=600&fit=crop",
        "categories": ["Fantasy", "Fiction"],
    },
    {
        "title": "Murder on the Orient Express",
        "author": "Agatha Christie",
        "description": "A detective novel featuring Hercule Poirot.",
        "isbn": "9780062693662",
        "price": Decimal("13.99"),
        "stock_quantity": 45,
        "cover_image": "https://images.unsplash.com/photo-1476275466078-4007374efbbe?w=400&h=600&fit=crop",
        "categories": ["Mystery", "Fiction"],
    },
    {
        "title": "Pride and Prejudice",
        "author": "Jane Austen",
        "description": "A romantic novel of manners.",
        "isbn": "9780141439518",
        "price": Decimal("11.99"),
        "stock_quantity": 55,
        "cover_image": "https://images.unsplash.com/photo-1589998059171-988d887df646?w=400&h=600&fit=crop",
        "categories": ["Romance", "Fiction"],
    },
    {
        "title": "The Da Vinci Code",
        "author": "Dan Brown",
        "description": "A mystery thriller novel.",
        "isbn": "9780307474278",
        "price": Decimal("16.99"),
        "stock_quantity": 70,
        "cover_image": "https://images.unsplash.com/photo-1519682337058-a94d519337bc?w=400&h=600&fit=crop",
        "categories": ["Thriller", "Mystery"],
    },
    {
        "title": "Steve Jobs",
        "author": "Walter Isaacson",
        "description": "The biography of Apple's legendary co-founder.",
        "isbn": "9781451648539",
        "price": Decimal("19.99"),
        "stock_quantity": 35,
        "cover_image": "https://images.unsplash.com/photo-1516979187457-637abb4f9353?w=400&h=600&fit=crop",
        "categories": ["Biography", "Non-Fiction"],
    },
    {
        "title": "Atomic Habits",
        "author": "James Clear",
        "description": "An easy and proven way to build good habits.",
        "isbn": "9780735211292",
        "price": Decimal("17.99"),
        "stock_quantity": 80,
        "cover_image": "https://images.unsplash.com/photo-1497633762265-9d179a990aa6?w=400&h=600&fit=crop",
        "categories": ["Self-Help", "Non-Fiction"],
    },
    {
        "title": "Clean Code",
        "author": "Robert C. Martin",
        "description": "A handbook of agile software craftsmanship.",
        "isbn": "9780132350884",
        "price": Decimal("39.99"),
        "stock_quantity": 25,
        "cover_image": "https://images.unsplash.com/photo-1515879218367-8466d910aaa4?w=400&h=600&fit=crop",
        "categories": ["Technology", "Non-Fiction"],
    },
    # Additional 100 books
    {
        "title": "To Kill a Mockingbird",
        "author": "Harper Lee",
        "description": "A novel about racial injustice in the American South.",
        "isbn": "9780061120084",
        "price": Decimal("14.99"),
        "stock_quantity": 65,
        "cover_image": "https://images.unsplash.com/photo-1495446815901-a7297e633e8d?w=400&h=600&fit=crop",
        "categories": ["Fiction"],
    },
    {
        "title": "The Catcher in the Rye",
        "author": "J.D. Salinger",
        "description": "A story about teenage alienation and loss of innocence.",
        "isbn": "9780316769488",
        "price": Decimal("13.99"),
        "stock_quantity": 55,
        "cover_image": "https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=400&h=600&fit=crop",
        "categories": ["Fiction"],
    },
    {
        "title": "Brave New World",
        "author": "Aldous Huxley",
        "description": "A dystopian novel set in a futuristic World State.",
        "isbn": "9780060850524",
        "price": Decimal("15.99"),
        "stock_quantity": 45,
        "cover_image": "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=600&fit=crop",
        "categories": ["Fiction", "Science Fiction"],
    },
    {
        "title": "The Lord of the Rings",
        "author": "J.R.R. Tolkien",
        "description": "An epic high-fantasy novel about the quest to destroy the One Ring.",
        "isbn": "9780618640157",
        "price": Decimal("29.99"),
        "stock_quantity": 40,
        "cover_image": "https://images.unsplash.com/photo-1518770660439-4636190af475?w=400&h=600&fit=crop",
        "categories": ["Fantasy", "Fiction"],
    },
    {
        "title": "Harry Potter and the Sorcerer's Stone",
        "author": "J.K. Rowling",
        "description": "The first book in the Harry Potter series about a young wizard.",
        "isbn": "9780590353427",
        "price": Decimal("12.99"),
        "stock_quantity": 100,
        "cover_image": "https://images.unsplash.com/photo-1551269901-5c5e14c25df7?w=400&h=600&fit=crop",
        "categories": ["Fantasy", "Fiction"],
    },
    {
        "title": "The Hunger Games",
        "author": "Suzanne Collins",
        "description": "A dystopian novel about a televised death match.",
        "isbn": "9780439023481",
        "price": Decimal("14.99"),
        "stock_quantity": 70,
        "cover_image": "https://images.unsplash.com/photo-1531988042231-d39a9cc12a9a?w=400&h=600&fit=crop",
        "categories": ["Science Fiction", "Thriller"],
    },
    {
        "title": "The Girl with the Dragon Tattoo",
        "author": "Stieg Larsson",
        "description": "A psychological thriller about a journalist and a hacker.",
        "isbn": "9780307454546",
        "price": Decimal("16.99"),
        "stock_quantity": 50,
        "cover_image": "https://images.unsplash.com/photo-1587876931567-564ce588bfbd?w=400&h=600&fit=crop",
        "categories": ["Thriller", "Mystery"],
    },
    {
        "title": "Gone Girl",
        "author": "Gillian Flynn",
        "description": "A thriller about a wife's disappearance and marriage secrets.",
        "isbn": "9780307588371",
        "price": Decimal("15.99"),
        "stock_quantity": 60,
        "cover_image": "https://images.unsplash.com/photo-1474932430478-367dbb6832c1?w=400&h=600&fit=crop",
        "categories": ["Thriller", "Mystery"],
    },
    {
        "title": "The Shining",
        "author": "Stephen King",
        "description": "A horror novel about a family in an isolated hotel.",
        "isbn": "9780307743657",
        "price": Decimal("17.99"),
        "stock_quantity": 45,
        "cover_image": "https://images.unsplash.com/photo-1509266272358-7701da638078?w=400&h=600&fit=crop",
        "categories": ["Thriller", "Fiction"],
    },
    {
        "title": "It",
        "author": "Stephen King",
        "description": "A horror novel about a shape-shifting evil entity.",
        "isbn": "9781501142970",
        "price": Decimal("19.99"),
        "stock_quantity": 40,
        "cover_image": "https://images.unsplash.com/photo-1603513492128-ba7bc9b3e143?w=400&h=600&fit=crop",
        "categories": ["Thriller", "Fiction"],
    },
    {
        "title": "The Alchemist",
        "author": "Paulo Coelho",
        "description": "A philosophical novel about following your dreams.",
        "isbn": "9780062315007",
        "price": Decimal("16.99"),
        "stock_quantity": 85,
        "cover_image": "https://images.unsplash.com/photo-1512820790803-83ca734da794?w=400&h=600&fit=crop",
        "categories": ["Fiction", "Self-Help"],
    },
    {
        "title": "The Kite Runner",
        "author": "Khaled Hosseini",
        "description": "A story of friendship and redemption set in Afghanistan.",
        "isbn": "9781594631931",
        "price": Decimal("15.99"),
        "stock_quantity": 50,
        "cover_image": "https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?w=400&h=600&fit=crop",
        "categories": ["Fiction"],
    },
    {
        "title": "Life of Pi",
        "author": "Yann Martel",
        "description": "A survival story of a boy stranded on a lifeboat with a tiger.",
        "isbn": "9780156027328",
        "price": Decimal("14.99"),
        "stock_quantity": 55,
        "cover_image": "https://images.unsplash.com/photo-1491841550275-ad7854e35ca6?w=400&h=600&fit=crop",
        "categories": ["Fiction"],
    },
    {
        "title": "The Book Thief",
        "author": "Markus Zusak",
        "description": "A novel narrated by Death about a girl in Nazi Germany.",
        "isbn": "9780375842207",
        "price": Decimal("13.99"),
        "stock_quantity": 60,
        "cover_image": "https://images.unsplash.com/photo-1456513080510-7bf3a84b82f8?w=400&h=600&fit=crop",
        "categories": ["Fiction"],
    },
    {
        "title": "Ender's Game",
        "author": "Orson Scott Card",
        "description": "A military science fiction novel about child soldiers in space.",
        "isbn": "9780812550702",
        "price": Decimal("15.99"),
        "stock_quantity": 45,
        "cover_image": "https://images.unsplash.com/photo-1446776811953-b23d57bd21aa?w=400&h=600&fit=crop",
        "categories": ["Science Fiction"],
    },
    {
        "title": "Foundation",
        "author": "Isaac Asimov",
        "description": "A science fiction novel about the fall of a galactic empire.",
        "isbn": "9780553293357",
        "price": Decimal("16.99"),
        "stock_quantity": 35,
        "cover_image": "https://images.unsplash.com/photo-1462331940025-496dfbfc7564?w=400&h=600&fit=crop",
        "categories": ["Science Fiction"],
    },
    {
        "title": "Neuromancer",
        "author": "William Gibson",
        "description": "A cyberpunk novel that defined the genre.",
        "isbn": "9780441569595",
        "price": Decimal("14.99"),
        "stock_quantity": 30,
        "cover_image": "https://images.unsplash.com/photo-1526374965328-7f61d4dc18c5?w=400&h=600&fit=crop",
        "categories": ["Science Fiction"],
    },
    {
        "title": "Snow Crash",
        "author": "Neal Stephenson",
        "description": "A cyberpunk novel about virtual reality and linguistics.",
        "isbn": "9780553380958",
        "price": Decimal("17.99"),
        "stock_quantity": 25,
        "cover_image": "https://images.unsplash.com/photo-1535223289827-42f1e9919769?w=400&h=600&fit=crop",
        "categories": ["Science Fiction"],
    },
    {
        "title": "The Martian",
        "author": "Andy Weir",
        "description": "A survival story of an astronaut stranded on Mars.",
        "isbn": "9780553418026",
        "price": Decimal("15.99"),
        "stock_quantity": 70,
        "cover_image": "https://images.unsplash.com/photo-1614728894747-a83421e2b9c9?w=400&h=600&fit=crop",
        "categories": ["Science Fiction"],
    },
    {
        "title": "Ready Player One",
        "author": "Ernest Cline",
        "description": "A dystopian novel about a virtual reality treasure hunt.",
        "isbn": "9780307887443",
        "price": Decimal("16.99"),
        "stock_quantity": 55,
        "cover_image": "https://images.unsplash.com/photo-1592478411213-6153e4ebc07d?w=400&h=600&fit=crop",
        "categories": ["Science Fiction"],
    },
    {
        "title": "A Game of Thrones",
        "author": "George R.R. Martin",
        "description": "The first book in the epic fantasy series A Song of Ice and Fire.",
        "isbn": "9780553593716",
        "price": Decimal("18.99"),
        "stock_quantity": 65,
        "cover_image": "https://images.unsplash.com/photo-1528901166007-3784c7dd3653?w=400&h=600&fit=crop",
        "categories": ["Fantasy", "Fiction"],
    },
    {
        "title": "The Name of the Wind",
        "author": "Patrick Rothfuss",
        "description": "A fantasy novel about a legendary figure telling his own story.",
        "isbn": "9780756404741",
        "price": Decimal("17.99"),
        "stock_quantity": 40,
        "cover_image": "https://images.unsplash.com/photo-1518709268805-4e9042af9f23?w=400&h=600&fit=crop",
        "categories": ["Fantasy"],
    },
    {
        "title": "Mistborn: The Final Empire",
        "author": "Brandon Sanderson",
        "description": "A fantasy novel about a world covered in ash.",
        "isbn": "9780765350381",
        "price": Decimal("15.99"),
        "stock_quantity": 50,
        "cover_image": "https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=400&h=600&fit=crop",
        "categories": ["Fantasy"],
    },
    {
        "title": "The Way of Kings",
        "author": "Brandon Sanderson",
        "description": "An epic fantasy novel in the Stormlight Archive series.",
        "isbn": "9780765365279",
        "price": Decimal("19.99"),
        "stock_quantity": 35,
        "cover_image": "https://images.unsplash.com/photo-1475924156734-496f6cac6ec1?w=400&h=600&fit=crop",
        "categories": ["Fantasy"],
    },
    {
        "title": "American Gods",
        "author": "Neil Gaiman",
        "description": "A fantasy novel about old gods living in America.",
        "isbn": "9780063081918",
        "price": Decimal("17.99"),
        "stock_quantity": 45,
        "cover_image": "https://images.unsplash.com/photo-1505664194779-8beaceb93744?w=400&h=600&fit=crop",
        "categories": ["Fantasy", "Fiction"],
    },
    {
        "title": "Good Omens",
        "author": "Terry Pratchett & Neil Gaiman",
        "description": "A comedic novel about the coming apocalypse.",
        "isbn": "9780060853983",
        "price": Decimal("15.99"),
        "stock_quantity": 55,
        "cover_image": "https://images.unsplash.com/photo-1519638399535-1b036603ac77?w=400&h=600&fit=crop",
        "categories": ["Fantasy", "Fiction"],
    },
    {
        "title": "The Silent Patient",
        "author": "Alex Michaelides",
        "description": "A psychological thriller about a woman who stops speaking.",
        "isbn": "9781250301697",
        "price": Decimal("16.99"),
        "stock_quantity": 60,
        "cover_image": "https://images.unsplash.com/photo-1543002588-bfa74002ed7e?w=400&h=600&fit=crop",
        "categories": ["Thriller", "Mystery"],
    },
    {
        "title": "The Woman in the Window",
        "author": "A.J. Finn",
        "description": "A thriller about an agoraphobic woman who witnesses something.",
        "isbn": "9780062678423",
        "price": Decimal("15.99"),
        "stock_quantity": 50,
        "cover_image": "https://images.unsplash.com/photo-1495640388908-05fa85288e61?w=400&h=600&fit=crop",
        "categories": ["Thriller", "Mystery"],
    },
    {
        "title": "Big Little Lies",
        "author": "Liane Moriarty",
        "description": "A novel about three women whose lives unravel to a murder.",
        "isbn": "9780399587207",
        "price": Decimal("16.99"),
        "stock_quantity": 55,
        "cover_image": "https://images.unsplash.com/photo-1476275466078-4007374efbbe?w=400&h=600&fit=crop",
        "categories": ["Thriller", "Fiction"],
    },
    {
        "title": "Sharp Objects",
        "author": "Gillian Flynn",
        "description": "A psychological thriller about a reporter returning to her hometown.",
        "isbn": "9780307341556",
        "price": Decimal("14.99"),
        "stock_quantity": 45,
        "cover_image": "https://images.unsplash.com/photo-1512436991641-6745cdb1723f?w=400&h=600&fit=crop",
        "categories": ["Thriller", "Mystery"],
    },
    {
        "title": "The Lovely Bones",
        "author": "Alice Sebold",
        "description": "A novel narrated by a murdered girl watching from the afterlife.",
        "isbn": "9780316666343",
        "price": Decimal("15.99"),
        "stock_quantity": 40,
        "cover_image": "https://images.unsplash.com/photo-1516979187457-637abb4f9353?w=400&h=600&fit=crop",
        "categories": ["Fiction", "Mystery"],
    },
    {
        "title": "And Then There Were None",
        "author": "Agatha Christie",
        "description": "A mystery novel about ten strangers on an isolated island.",
        "isbn": "9780062073488",
        "price": Decimal("14.99"),
        "stock_quantity": 50,
        "cover_image": "https://images.unsplash.com/photo-1532012197267-da84d127e765?w=400&h=600&fit=crop",
        "categories": ["Mystery", "Fiction"],
    },
    {
        "title": "The Girl on the Train",
        "author": "Paula Hawkins",
        "description": "A psychological thriller about obsession and deception.",
        "isbn": "9781594634024",
        "price": Decimal("16.99"),
        "stock_quantity": 65,
        "cover_image": "https://images.unsplash.com/photo-1474366521946-c3d4b507abf2?w=400&h=600&fit=crop",
        "categories": ["Thriller", "Mystery"],
    },
    {
        "title": "In the Woods",
        "author": "Tana French",
        "description": "A psychological mystery about a detective's childhood trauma.",
        "isbn": "9780143113492",
        "price": Decimal("15.99"),
        "stock_quantity": 35,
        "cover_image": "https://images.unsplash.com/photo-1448375240586-882707db888b?w=400&h=600&fit=crop",
        "categories": ["Mystery", "Thriller"],
    },
    {
        "title": "The Notebook",
        "author": "Nicholas Sparks",
        "description": "A romantic novel about enduring love.",
        "isbn": "9781455582877",
        "price": Decimal("14.99"),
        "stock_quantity": 60,
        "cover_image": "https://images.unsplash.com/photo-1474552226712-ac0f0961a954?w=400&h=600&fit=crop",
        "categories": ["Romance", "Fiction"],
    },
    {
        "title": "Me Before You",
        "author": "Jojo Moyes",
        "description": "A romantic novel about an unlikely relationship.",
        "isbn": "9780143124542",
        "price": Decimal("15.99"),
        "stock_quantity": 55,
        "cover_image": "https://images.unsplash.com/photo-1518199266791-5375a83190b7?w=400&h=600&fit=crop",
        "categories": ["Romance", "Fiction"],
    },
    {
        "title": "Outlander",
        "author": "Diana Gabaldon",
        "description": "A historical romance novel with time travel.",
        "isbn": "9780440212560",
        "price": Decimal("18.99"),
        "stock_quantity": 45,
        "cover_image": "https://images.unsplash.com/photo-1519981593452-666cf05569a9?w=400&h=600&fit=crop",
        "categories": ["Romance", "Fantasy"],
    },
    {
        "title": "The Time Traveler's Wife",
        "author": "Audrey Niffenegger",
        "description": "A love story about a man with a genetic disorder that causes time travel.",
        "isbn": "9781476764832",
        "price": Decimal("16.99"),
        "stock_quantity": 50,
        "cover_image": "https://images.unsplash.com/photo-1501139083538-0139583c060f?w=400&h=600&fit=crop",
        "categories": ["Romance", "Science Fiction"],
    },
    {
        "title": "Eleanor & Park",
        "author": "Rainbow Rowell",
        "description": "A young adult romance about two misfits falling in love.",
        "isbn": "9781250012579",
        "price": Decimal("12.99"),
        "stock_quantity": 65,
        "cover_image": "https://images.unsplash.com/photo-1516589091380-5d8e87df6999?w=400&h=600&fit=crop",
        "categories": ["Romance", "Fiction"],
    },
    {
        "title": "The Fault in Our Stars",
        "author": "John Green",
        "description": "A young adult romance about two teens with cancer.",
        "isbn": "9780142424179",
        "price": Decimal("13.99"),
        "stock_quantity": 70,
        "cover_image": "https://images.unsplash.com/photo-1419242902214-272b3f66ee7a?w=400&h=600&fit=crop",
        "categories": ["Romance", "Fiction"],
    },
    {
        "title": "Beach Read",
        "author": "Emily Henry",
        "description": "A romance about two writers who swap genres.",
        "isbn": "9781984806734",
        "price": Decimal("16.99"),
        "stock_quantity": 55,
        "cover_image": "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=400&h=600&fit=crop",
        "categories": ["Romance"],
    },
    {
        "title": "Becoming",
        "author": "Michelle Obama",
        "description": "A memoir by the former First Lady of the United States.",
        "isbn": "9781524763138",
        "price": Decimal("19.99"),
        "stock_quantity": 80,
        "cover_image": "https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?w=400&h=600&fit=crop",
        "categories": ["Biography", "Non-Fiction"],
    },
    {
        "title": "Educated",
        "author": "Tara Westover",
        "description": "A memoir about a woman who escapes her survivalist family.",
        "isbn": "9780399590504",
        "price": Decimal("17.99"),
        "stock_quantity": 60,
        "cover_image": "https://images.unsplash.com/photo-1497633762265-9d179a990aa6?w=400&h=600&fit=crop",
        "categories": ["Biography", "Non-Fiction"],
    },
    {
        "title": "The Glass Castle",
        "author": "Jeannette Walls",
        "description": "A memoir about growing up in a dysfunctional family.",
        "isbn": "9780743247542",
        "price": Decimal("15.99"),
        "stock_quantity": 50,
        "cover_image": "https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=400&h=600&fit=crop",
        "categories": ["Biography", "Non-Fiction"],
    },
    {
        "title": "Born a Crime",
        "author": "Trevor Noah",
        "description": "A memoir about growing up in South Africa during apartheid.",
        "isbn": "9780399588198",
        "price": Decimal("16.99"),
        "stock_quantity": 55,
        "cover_image": "https://images.unsplash.com/photo-1512820790803-83ca734da794?w=400&h=600&fit=crop",
        "categories": ["Biography", "Non-Fiction"],
    },
    {
        "title": "The Diary of a Young Girl",
        "author": "Anne Frank",
        "description": "The diary of a Jewish girl hiding during the Holocaust.",
        "isbn": "9780553296983",
        "price": Decimal("12.99"),
        "stock_quantity": 70,
        "cover_image": "https://images.unsplash.com/photo-1456513080510-7bf3a84b82f8?w=400&h=600&fit=crop",
        "categories": ["Biography", "Non-Fiction"],
    },
    {
        "title": "Long Walk to Freedom",
        "author": "Nelson Mandela",
        "description": "The autobiography of Nelson Mandela.",
        "isbn": "9780316548182",
        "price": Decimal("18.99"),
        "stock_quantity": 40,
        "cover_image": "https://images.unsplash.com/photo-1589829085413-56de8ae18c73?w=400&h=600&fit=crop",
        "categories": ["Biography", "Non-Fiction"],
    },
    {
        "title": "Einstein: His Life and Universe",
        "author": "Walter Isaacson",
        "description": "A biography of Albert Einstein.",
        "isbn": "9780743264747",
        "price": Decimal("19.99"),
        "stock_quantity": 35,
        "cover_image": "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=600&fit=crop",
        "categories": ["Biography", "Non-Fiction"],
    },
    {
        "title": "The Power of Habit",
        "author": "Charles Duhigg",
        "description": "A book about the science of habit formation.",
        "isbn": "9780812981605",
        "price": Decimal("17.99"),
        "stock_quantity": 75,
        "cover_image": "https://images.unsplash.com/photo-1434030216411-0b793f4b4173?w=400&h=600&fit=crop",
        "categories": ["Self-Help", "Non-Fiction"],
    },
    {
        "title": "Thinking, Fast and Slow",
        "author": "Daniel Kahneman",
        "description": "A book about the two systems that drive the way we think.",
        "isbn": "9780374533557",
        "price": Decimal("18.99"),
        "stock_quantity": 50,
        "cover_image": "https://images.unsplash.com/photo-1456406644174-8ddd4cd52a06?w=400&h=600&fit=crop",
        "categories": ["Self-Help", "Non-Fiction"],
    },
    {
        "title": "The 7 Habits of Highly Effective People",
        "author": "Stephen R. Covey",
        "description": "A self-help book about personal and professional effectiveness.",
        "isbn": "9781982137274",
        "price": Decimal("16.99"),
        "stock_quantity": 65,
        "cover_image": "https://images.unsplash.com/photo-1499750310107-5fef28a66643?w=400&h=600&fit=crop",
        "categories": ["Self-Help", "Non-Fiction"],
    },
    {
        "title": "How to Win Friends and Influence People",
        "author": "Dale Carnegie",
        "description": "A self-help classic about interpersonal skills.",
        "isbn": "9780671027032",
        "price": Decimal("15.99"),
        "stock_quantity": 80,
        "cover_image": "https://images.unsplash.com/photo-1491841550275-ad7854e35ca6?w=400&h=600&fit=crop",
        "categories": ["Self-Help", "Non-Fiction"],
    },
    {
        "title": "The Subtle Art of Not Giving a F*ck",
        "author": "Mark Manson",
        "description": "A counterintuitive approach to living a good life.",
        "isbn": "9780062457714",
        "price": Decimal("14.99"),
        "stock_quantity": 90,
        "cover_image": "https://images.unsplash.com/photo-1516979187457-637abb4f9353?w=400&h=600&fit=crop",
        "categories": ["Self-Help", "Non-Fiction"],
    },
    {
        "title": "Mindset: The New Psychology of Success",
        "author": "Carol S. Dweck",
        "description": "A book about growth mindset versus fixed mindset.",
        "isbn": "9780345472328",
        "price": Decimal("16.99"),
        "stock_quantity": 55,
        "cover_image": "https://images.unsplash.com/photo-1474631245212-32dc3c8310c6?w=400&h=600&fit=crop",
        "categories": ["Self-Help", "Non-Fiction"],
    },
    {
        "title": "Grit: The Power of Passion and Perseverance",
        "author": "Angela Duckworth",
        "description": "A book about the importance of grit in achieving success.",
        "isbn": "9781501111112",
        "price": Decimal("17.99"),
        "stock_quantity": 45,
        "cover_image": "https://images.unsplash.com/photo-1495446815901-a7297e633e8d?w=400&h=600&fit=crop",
        "categories": ["Self-Help", "Non-Fiction"],
    },
    {
        "title": "The Pragmatic Programmer",
        "author": "David Thomas & Andrew Hunt",
        "description": "A classic book on software development best practices.",
        "isbn": "9780135957059",
        "price": Decimal("49.99"),
        "stock_quantity": 30,
        "cover_image": "https://images.unsplash.com/photo-1461749280684-dccba630e2f6?w=400&h=600&fit=crop",
        "categories": ["Technology", "Non-Fiction"],
    },
    {
        "title": "Design Patterns",
        "author": "Gang of Four",
        "description": "Elements of reusable object-oriented software.",
        "isbn": "9780201633610",
        "price": Decimal("54.99"),
        "stock_quantity": 20,
        "cover_image": "https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=400&h=600&fit=crop",
        "categories": ["Technology", "Non-Fiction"],
    },
    {
        "title": "Introduction to Algorithms",
        "author": "Thomas H. Cormen",
        "description": "A comprehensive textbook on algorithms.",
        "isbn": "9780262033848",
        "price": Decimal("89.99"),
        "stock_quantity": 25,
        "cover_image": "https://images.unsplash.com/photo-1509228468518-180dd4864904?w=400&h=600&fit=crop",
        "categories": ["Technology", "Non-Fiction"],
    },
    {
        "title": "JavaScript: The Good Parts",
        "author": "Douglas Crockford",
        "description": "A guide to the best features of JavaScript.",
        "isbn": "9780596517748",
        "price": Decimal("29.99"),
        "stock_quantity": 40,
        "cover_image": "https://images.unsplash.com/photo-1627398242454-45a1465c2479?w=400&h=600&fit=crop",
        "categories": ["Technology", "Non-Fiction"],
    },
    {
        "title": "Python Crash Course",
        "author": "Eric Matthes",
        "description": "A hands-on, project-based introduction to programming.",
        "isbn": "9781593279288",
        "price": Decimal("35.99"),
        "stock_quantity": 55,
        "cover_image": "https://images.unsplash.com/photo-1526379095098-d400fd0bf935?w=400&h=600&fit=crop",
        "categories": ["Technology", "Non-Fiction"],
    },
    {
        "title": "The Lean Startup",
        "author": "Eric Ries",
        "description": "A new approach to business for continuous innovation.",
        "isbn": "9780307887894",
        "price": Decimal("16.99"),
        "stock_quantity": 60,
        "cover_image": "https://images.unsplash.com/photo-1519389950473-47ba0277781c?w=400&h=600&fit=crop",
        "categories": ["Technology", "Non-Fiction"],
    },
    {
        "title": "Cracking the Coding Interview",
        "author": "Gayle Laakmann McDowell",
        "description": "189 programming questions and solutions.",
        "isbn": "9780984782857",
        "price": Decimal("39.99"),
        "stock_quantity": 45,
        "cover_image": "https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=400&h=600&fit=crop",
        "categories": ["Technology", "Non-Fiction"],
    },
    {
        "title": "Sapiens: A Brief History of Humankind",
        "author": "Yuval Noah Harari",
        "description": "A narrative history of humanity from the Stone Age to present.",
        "isbn": "9780062316097",
        "price": Decimal("18.99"),
        "stock_quantity": 75,
        "cover_image": "https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?w=400&h=600&fit=crop",
        "categories": ["Non-Fiction"],
    },
    {
        "title": "Homo Deus: A Brief History of Tomorrow",
        "author": "Yuval Noah Harari",
        "description": "A look at humanity's future and potential.",
        "isbn": "9780062464316",
        "price": Decimal("17.99"),
        "stock_quantity": 50,
        "cover_image": "https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=400&h=600&fit=crop",
        "categories": ["Non-Fiction", "Science Fiction"],
    },
    {
        "title": "A Brief History of Time",
        "author": "Stephen Hawking",
        "description": "A landmark book on cosmology for general readers.",
        "isbn": "9780553380163",
        "price": Decimal("16.99"),
        "stock_quantity": 55,
        "cover_image": "https://images.unsplash.com/photo-1462331940025-496dfbfc7564?w=400&h=600&fit=crop",
        "categories": ["Non-Fiction"],
    },
    {
        "title": "Cosmos",
        "author": "Carl Sagan",
        "description": "A journey through the universe and human discovery.",
        "isbn": "9780345539434",
        "price": Decimal("18.99"),
        "stock_quantity": 40,
        "cover_image": "https://images.unsplash.com/photo-1446776811953-b23d57bd21aa?w=400&h=600&fit=crop",
        "categories": ["Non-Fiction"],
    },
    {
        "title": "The Selfish Gene",
        "author": "Richard Dawkins",
        "description": "A book about evolution from the gene's perspective.",
        "isbn": "9780198788607",
        "price": Decimal("15.99"),
        "stock_quantity": 35,
        "cover_image": "https://images.unsplash.com/photo-1530026405186-ed1f139313f8?w=400&h=600&fit=crop",
        "categories": ["Non-Fiction"],
    },
    {
        "title": "Freakonomics",
        "author": "Steven D. Levitt & Stephen J. Dubner",
        "description": "A rogue economist explores the hidden side of everything.",
        "isbn": "9780060731335",
        "price": Decimal("16.99"),
        "stock_quantity": 60,
        "cover_image": "https://images.unsplash.com/photo-1554224155-6726b3ff858f?w=400&h=600&fit=crop",
        "categories": ["Non-Fiction"],
    },
    {
        "title": "Outliers: The Story of Success",
        "author": "Malcolm Gladwell",
        "description": "A look at what makes high achievers different.",
        "isbn": "9780316017930",
        "price": Decimal("17.99"),
        "stock_quantity": 65,
        "cover_image": "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=600&fit=crop",
        "categories": ["Non-Fiction", "Self-Help"],
    },
    {
        "title": "Blink: The Power of Thinking Without Thinking",
        "author": "Malcolm Gladwell",
        "description": "A book about rapid cognition and snap judgments.",
        "isbn": "9780316010665",
        "price": Decimal("16.99"),
        "stock_quantity": 50,
        "cover_image": "https://images.unsplash.com/photo-1456324504439-367cee3b3c32?w=400&h=600&fit=crop",
        "categories": ["Non-Fiction", "Self-Help"],
    },
    {
        "title": "The Tipping Point",
        "author": "Malcolm Gladwell",
        "description": "How little things can make a big difference.",
        "isbn": "9780316346627",
        "price": Decimal("15.99"),
        "stock_quantity": 55,
        "cover_image": "https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?w=400&h=600&fit=crop",
        "categories": ["Non-Fiction"],
    },
    {
        "title": "Project Hail Mary",
        "author": "Andy Weir",
        "description": "A lone astronaut must save Earth from extinction.",
        "isbn": "9780593135204",
        "price": Decimal("18.99"),
        "stock_quantity": 60,
        "cover_image": "https://images.unsplash.com/photo-1454789548928-9efd52dc4031?w=400&h=600&fit=crop",
        "categories": ["Science Fiction"],
    },
    {
        "title": "Children of Time",
        "author": "Adrian Tchaikovsky",
        "description": "An epic science fiction novel about evolution and survival.",
        "isbn": "9781447273288",
        "price": Decimal("16.99"),
        "stock_quantity": 40,
        "cover_image": "https://images.unsplash.com/photo-1518770660439-4636190af475?w=400&h=600&fit=crop",
        "categories": ["Science Fiction"],
    },
    {
        "title": "The Three-Body Problem",
        "author": "Liu Cixin",
        "description": "Hard science fiction about first contact with aliens.",
        "isbn": "9780765382030",
        "price": Decimal("17.99"),
        "stock_quantity": 45,
        "cover_image": "https://images.unsplash.com/photo-1506318137071-a8e063b4bec0?w=400&h=600&fit=crop",
        "categories": ["Science Fiction"],
    },
    {
        "title": "Dark Matter",
        "author": "Blake Crouch",
        "description": "A thriller about parallel universes and identity.",
        "isbn": "9781101904244",
        "price": Decimal("15.99"),
        "stock_quantity": 55,
        "cover_image": "https://images.unsplash.com/photo-1534796636912-3b95b3ab5986?w=400&h=600&fit=crop",
        "categories": ["Science Fiction", "Thriller"],
    },
    {
        "title": "Recursion",
        "author": "Blake Crouch",
        "description": "A mind-bending thriller about memory and time.",
        "isbn": "9781524759780",
        "price": Decimal("16.99"),
        "stock_quantity": 50,
        "cover_image": "https://images.unsplash.com/photo-1516339901601-2e1b62dc0c45?w=400&h=600&fit=crop",
        "categories": ["Science Fiction", "Thriller"],
    },
    {
        "title": "The Midnight Library",
        "author": "Matt Haig",
        "description": "A novel about parallel lives and second chances.",
        "isbn": "9780525559474",
        "price": Decimal("17.99"),
        "stock_quantity": 70,
        "cover_image": "https://images.unsplash.com/photo-1521587760476-6c12a4b040da?w=400&h=600&fit=crop",
        "categories": ["Fiction", "Fantasy"],
    },
    {
        "title": "Circe",
        "author": "Madeline Miller",
        "description": "A retelling of Greek mythology from Circe's perspective.",
        "isbn": "9780316556347",
        "price": Decimal("16.99"),
        "stock_quantity": 55,
        "cover_image": "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=600&fit=crop",
        "categories": ["Fantasy", "Fiction"],
    },
    {
        "title": "The Song of Achilles",
        "author": "Madeline Miller",
        "description": "A retelling of the Iliad from Patroclus's perspective.",
        "isbn": "9780062060624",
        "price": Decimal("15.99"),
        "stock_quantity": 50,
        "cover_image": "https://images.unsplash.com/photo-1475924156734-496f6cac6ec1?w=400&h=600&fit=crop",
        "categories": ["Fantasy", "Romance"],
    },
    {
        "title": "Piranesi",
        "author": "Susanna Clarke",
        "description": "A mysterious novel about a man living in a labyrinthine house.",
        "isbn": "9781635575637",
        "price": Decimal("18.99"),
        "stock_quantity": 35,
        "cover_image": "https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=400&h=600&fit=crop",
        "categories": ["Fantasy", "Mystery"],
    },
    {
        "title": "The House in the Cerulean Sea",
        "author": "TJ Klune",
        "description": "A cozy fantasy about an orphanage for magical children.",
        "isbn": "9781250217288",
        "price": Decimal("16.99"),
        "stock_quantity": 60,
        "cover_image": "https://images.unsplash.com/photo-1505664194779-8beaceb93744?w=400&h=600&fit=crop",
        "categories": ["Fantasy", "Romance"],
    },
    {
        "title": "Mexican Gothic",
        "author": "Silvia Moreno-Garcia",
        "description": "A horror novel set in 1950s Mexico.",
        "isbn": "9780525620785",
        "price": Decimal("17.99"),
        "stock_quantity": 40,
        "cover_image": "https://images.unsplash.com/photo-1509266272358-7701da638078?w=400&h=600&fit=crop",
        "categories": ["Thriller", "Fiction"],
    },
    {
        "title": "The Vanishing Half",
        "author": "Brit Bennett",
        "description": "A novel about twin sisters who choose different paths.",
        "isbn": "9780525536291",
        "price": Decimal("16.99"),
        "stock_quantity": 55,
        "cover_image": "https://images.unsplash.com/photo-1491841550275-ad7854e35ca6?w=400&h=600&fit=crop",
        "categories": ["Fiction"],
    },
    {
        "title": "Where the Crawdads Sing",
        "author": "Delia Owens",
        "description": "A mystery about a girl who grows up alone in the marshes.",
        "isbn": "9780735219090",
        "price": Decimal("17.99"),
        "stock_quantity": 80,
        "cover_image": "https://images.unsplash.com/photo-1448375240586-882707db888b?w=400&h=600&fit=crop",
        "categories": ["Fiction", "Mystery"],
    },
    {
        "title": "Anxious People",
        "author": "Fredrik Backman",
        "description": "A comedy about a failed bank robber taking hostages.",
        "isbn": "9781501160837",
        "price": Decimal("16.99"),
        "stock_quantity": 50,
        "cover_image": "https://images.unsplash.com/photo-1474366521946-c3d4b507abf2?w=400&h=600&fit=crop",
        "categories": ["Fiction"],
    },
    {
        "title": "A Man Called Ove",
        "author": "Fredrik Backman",
        "description": "A novel about a grumpy man with a big heart.",
        "isbn": "9781476738024",
        "price": Decimal("15.99"),
        "stock_quantity": 65,
        "cover_image": "https://images.unsplash.com/photo-1512820790803-83ca734da794?w=400&h=600&fit=crop",
        "categories": ["Fiction"],
    },
    {
        "title": "Normal People",
        "author": "Sally Rooney",
        "description": "A novel about the complicated relationship between two Irish teens.",
        "isbn": "9781984822178",
        "price": Decimal("16.99"),
        "stock_quantity": 60,
        "cover_image": "https://images.unsplash.com/photo-1516589091380-5d8e87df6999?w=400&h=600&fit=crop",
        "categories": ["Fiction", "Romance"],
    },
    {
        "title": "Beautiful World, Where Are You",
        "author": "Sally Rooney",
        "description": "A novel about friendship, love, and the modern world.",
        "isbn": "9780374602604",
        "price": Decimal("17.99"),
        "stock_quantity": 45,
        "cover_image": "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=400&h=600&fit=crop",
        "categories": ["Fiction", "Romance"],
    },
    {
        "title": "The Seven Husbands of Evelyn Hugo",
        "author": "Taylor Jenkins Reid",
        "description": "A novel about a reclusive Hollywood icon.",
        "isbn": "9781501161933",
        "price": Decimal("16.99"),
        "stock_quantity": 70,
        "cover_image": "https://images.unsplash.com/photo-1518199266791-5375a83190b7?w=400&h=600&fit=crop",
        "categories": ["Fiction", "Romance"],
    },
    {
        "title": "Daisy Jones & The Six",
        "author": "Taylor Jenkins Reid",
        "description": "A novel about a 1970s rock band.",
        "isbn": "9781524798628",
        "price": Decimal("17.99"),
        "stock_quantity": 55,
        "cover_image": "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=600&fit=crop",
        "categories": ["Fiction"],
    },
    {
        "title": "Malibu Rising",
        "author": "Taylor Jenkins Reid",
        "description": "A novel about one epic night in Malibu.",
        "isbn": "9781524798659",
        "price": Decimal("18.99"),
        "stock_quantity": 50,
        "cover_image": "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=400&h=600&fit=crop",
        "categories": ["Fiction"],
    },
    {
        "title": "It Ends with Us",
        "author": "Colleen Hoover",
        "description": "A novel about the complexities of abusive relationships.",
        "isbn": "9781501110368",
        "price": Decimal("15.99"),
        "stock_quantity": 90,
        "cover_image": "https://images.unsplash.com/photo-1474552226712-ac0f0961a954?w=400&h=600&fit=crop",
        "categories": ["Romance", "Fiction"],
    },
    {
        "title": "Verity",
        "author": "Colleen Hoover",
        "description": "A psychological thriller about a writer uncovering dark secrets.",
        "isbn": "9781538724736",
        "price": Decimal("16.99"),
        "stock_quantity": 75,
        "cover_image": "https://images.unsplash.com/photo-1587876931567-564ce588bfbd?w=400&h=600&fit=crop",
        "categories": ["Thriller", "Romance"],
    },
    {
        "title": "Atomic Habits Workbook",
        "author": "James Clear",
        "description": "A practical guide to applying the Atomic Habits principles.",
        "isbn": "9780593189641",
        "price": Decimal("19.99"),
        "stock_quantity": 40,
        "cover_image": "https://images.unsplash.com/photo-1434030216411-0b793f4b4173?w=400&h=600&fit=crop",
        "categories": ["Self-Help", "Non-Fiction"],
    },
    {
        "title": "Deep Work",
        "author": "Cal Newport",
        "description": "Rules for focused success in a distracted world.",
        "isbn": "9781455586691",
        "price": Decimal("17.99"),
        "stock_quantity": 55,
        "cover_image": "https://images.unsplash.com/photo-1499750310107-5fef28a66643?w=400&h=600&fit=crop",
        "categories": ["Self-Help", "Non-Fiction"],
    },
    {
        "title": "Digital Minimalism",
        "author": "Cal Newport",
        "description": "Choosing a focused life in a noisy world.",
        "isbn": "9780525536512",
        "price": Decimal("16.99"),
        "stock_quantity": 50,
        "cover_image": "https://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=400&h=600&fit=crop",
        "categories": ["Self-Help", "Technology"],
    },
    {
        "title": "Zero to One",
        "author": "Peter Thiel",
        "description": "Notes on startups, or how to build the future.",
        "isbn": "9780804139298",
        "price": Decimal("18.99"),
        "stock_quantity": 45,
        "cover_image": "https://images.unsplash.com/photo-1519389950473-47ba0277781c?w=400&h=600&fit=crop",
        "categories": ["Technology", "Non-Fiction"],
    },
    {
        "title": "The Innovator's Dilemma",
        "author": "Clayton M. Christensen",
        "description": "When new technologies cause great firms to fail.",
        "isbn": "9780062060242",
        "price": Decimal("17.99"),
        "stock_quantity": 35,
        "cover_image": "https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?w=400&h=600&fit=crop",
        "categories": ["Technology", "Non-Fiction"],
    },
    {
        "title": "Bad Blood",
        "author": "John Carreyrou",
        "description": "Secrets and lies in a Silicon Valley startup.",
        "isbn": "9781524731656",
        "price": Decimal("16.99"),
        "stock_quantity": 60,
        "cover_image": "https://images.unsplash.com/photo-1532187863486-abf9dbad1b69?w=400&h=600&fit=crop",
        "categories": ["Non-Fiction", "Biography"],
    },
    {
        "title": "Shoe Dog",
        "author": "Phil Knight",
        "description": "A memoir by the creator of Nike.",
        "isbn": "9781501135927",
        "price": Decimal("18.99"),
        "stock_quantity": 50,
        "cover_image": "https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=400&h=600&fit=crop",
        "categories": ["Biography", "Non-Fiction"],
    },
]

USERS = [
    {
        "email": "admin@bookstore.com",
        "password": "admin123456",
        "full_name": "Admin User",
        "role": UserRole.ADMIN,
    },
    {
        "email": "user@bookstore.com",
        "password": "user123456",
        "full_name": "Regular User",
        "role": UserRole.USER,
    },
    {
        "email": "john@example.com",
        "password": "password123",
        "full_name": "John Doe",
        "role": UserRole.USER,
    },
]


async def seed_database():
    await create_tables()

    async with AsyncSessionLocal() as db:
        print("Seeding categories...")
        categories_map = {}
        for cat_data in CATEGORIES:
            category = Category(**cat_data)
            db.add(category)
            await db.flush()
            categories_map[cat_data["name"]] = category

        print("Seeding books...")
        for book_data in BOOKS:
            cat_names = book_data.pop("categories")
            book = Book(**book_data)
            book.categories = [categories_map[name] for name in cat_names]
            db.add(book)

        print("Seeding users...")
        for user_data in USERS:
            password = user_data.pop("password")
            user = User(
                **user_data,
                hashed_password=get_password_hash(password)
            )
            db.add(user)

        await db.commit()
        print("Database seeded successfully!")
        print("\nAdmin credentials:")
        print("  Email: admin@bookstore.com")
        print("  Password: admin123456")
        print("\nUser credentials:")
        print("  Email: user@bookstore.com")
        print("  Password: user123456")


if __name__ == "__main__":
    asyncio.run(seed_database())
